<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex, nofollow" />
  <title>Post Editor - Gisu Safaris</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background:#f6f7fb; }
    .card { border:0; box-shadow:0 4px 14px rgba(0,0,0,.06); }
    textarea { min-height: 200px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg bg-white border-bottom">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold" href="#">Gisu Safaris Admin</a>
      <span class="navbar-text">Post Editor</span>
      <div class="ms-auto">
        <button id="logoutBtn" class="btn btn-sm btn-outline-danger">Logout</button>
      </div>
    </div>
  </nav>

  <div class="container py-4">
    <div class="row g-3">
      <div class="col-12">
        <div class="alert alert-info">Admin-only editor. You are logged in.</div>
      </div>

      <div class="col-12">
        <div class="card">
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">Slug</label>
                <input id="slug" class="form-control mono" placeholder="e.g. uganda-safari-itinerary" />
                <div class="form-text">Lowercase, hyphens only. URL: /blog/post.html?slug=your-slug</div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Status</label>
                <select id="status" class="form-select">
                  <option value="published" selected>published</option>
                  <option value="draft">draft</option>
                </select>
              </div>
              <div class="col-md-12">
                <label class="form-label">Title</label>
                <input id="title" class="form-control" />
              </div>
              <div class="col-md-12">
                <label class="form-label">Summary</label>
                <textarea id="summary" class="form-control" placeholder="Short excerpt shown in lists"></textarea>
              </div>
              <div class="col-md-12">
                <label class="form-label">Hero Image URL</label>
                <input id="hero" class="form-control" placeholder="/images/blog/your-image.jpg" />
              </div>
              <div class="col-md-12">
                <label class="form-label">Content (HTML)</label>
                <textarea id="content" class="form-control mono" placeholder="<p>Your article content...</p>"></textarea>
                <div class="form-text">You can paste HTML from a rich editor. Ensure headings and paragraphs are well-formed.</div>
              </div>
              <div class="col-12 d-flex gap-2">
                <button id="saveBtn" class="btn btn-primary">Save Post</button>
                <button id="previewBtn" class="btn btn-outline-primary">Open Preview</button>
              </div>
              <div class="col-12">
                <div id="result" class="mt-2"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const API = '/backend/api/posts.php';
    const AUTH = '/backend/api/auth.php';
    function $(s){ return document.querySelector(s); }

    async function savePost(){
      const payload = {
        slug: $('#slug').value.trim().toLowerCase(),
        title: $('#title').value.trim(),
        summary: $('#summary').value.trim(),
        hero_image: $('#hero').value.trim(),
        content_html: $('#content').value,
        status: $('#status').value
      };
      if (!payload.slug || !payload.title || !payload.content_html) {
        $('#result').innerHTML = '<div class="alert alert-warning">Slug, Title and Content are required.</div>';
        return;
      }
      const res = await fetch(API, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
      const json = await res.json().catch(()=>({}));
      if (!res.ok || !json?.success) {
        $('#result').innerHTML = '<div class="alert alert-danger">Failed to save: ' + (json.message||'') + '</div>';
        return;
      }
      $('#result').innerHTML = '<div class="alert alert-success">Saved! <a href="/blog/post.html?slug=' + encodeURIComponent(payload.slug) + '" target="_blank">Open</a></div>';
    }

    async function requireSession(){
      try {
        const r = await fetch(AUTH, { headers: { 'Accept': 'application/json' } });
        const j = await r.json();
        if (!j?.success || !j?.data?.me?.is_admin) {
          window.location.href = '/backend/admin/login.html';
        }
      } catch {
        window.location.href = '/backend/admin/login.html';
      }
    }

    document.addEventListener('DOMContentLoaded', async ()=>{
      await requireSession();
      $('#saveBtn').addEventListener('click', savePost);
      $('#previewBtn').addEventListener('click', ()=>{
        const slug = $('#slug').value.trim();
        if (!slug) { alert('Enter slug first'); return; }
        window.open('/blog/post.html?slug=' + encodeURIComponent(slug), '_blank');
      });
      document.getElementById('logoutBtn').addEventListener('click', async ()=>{
        await fetch(AUTH, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ action: 'logout' }) });
        window.location.href = '/backend/admin/login.html';
      });
    });
  </script>
<footer class="bg-dark text-white py-5">
    <div class="container">
      <div class="row g-4">
        <div class="col-lg-4">
          <div class="d-flex align-items-center mb-3">
            <img src="https://gisusafaris.com/img/gisu_safaris.png" alt="Gisu Safaris Logo" class="footer-logo me-2">
            <h5 class="mb-0">Gisu Safaris</h5>
          </div>
          <p class="mb-3">East Africa's premier safari company specializing in wildlife adventures and meaningful community experiences.</p>
          <div class="contact-info">
            <p class="mb-2"><i class="fas fa-envelope me-2"></i><a href="mailto:info@gisusafaris.com" class="text-light text-decoration-none">info@gisusafaris.com</a></p>
            <p class="mb-2"><i class="fas fa-phone me-2"></i>
              <img src="https://flagcdn.com/ug.svg" alt="Uganda flag" class="flag-icon me-1" loading="lazy">
              <a href="tel:+256703466516" class="text-light text-decoration-none">+256 703 466 516</a>
            </p>
            <p class="mb-2"><i class="fas fa-phone me-2"></i>
              <img src="https://flagcdn.com/au.svg" alt="Australia flag" class="flag-icon me-1" loading="lazy">
              <a href="tel:+61478914106" class="text-light text-decoration-none">+614 7891 4106</a>
            </p>
            <p class="mb-2"><i class="fas fa-phone me-2"></i>
              <img src="https://flagcdn.com/gb.svg" alt="United Kingdom flag" class="flag-icon me-1" loading="lazy">
              <a href="tel:+447350538108" class="text-light text-decoration-none">+44 7350 538 108</a>
            </p>
            <p class="mb-0"><i class="fas fa-map-marker-alt me-2"></i>Kampala, Uganda</p>
          </div>
        </div>
        <div class="col-lg-2">
          <h6 class="mb-3">Quick Links</h6>
          <ul class="list-unstyled">
            <li class="mb-2"><a href="/index.html" class="text-light text-decoration-none">Home</a></li>
            <li class="mb-2"><a href="/about.html" class="text-light text-decoration-none">About Us</a></li>
            <li class="mb-2"><a href="/packages/index.html" class="text-light text-decoration-none">Safari Packages</a></li>
            <li class="mb-2"><a href="/destinations/index.html" class="text-light text-decoration-none">Destinations</a></li>
            <li class="mb-2"><a href="/gallery.html" class="text-light text-decoration-none">Gallery</a></li>
            <li class="mb-2"><a href="/contact.html" class="text-light text-decoration-none">Contact</a></li>
          </ul>
        </div>
        <div class="col-lg-3">
          <h6 class="mb-3">Safari Destinations</h6>
          <ul class="list-unstyled">
            <li class="mb-2"><a href="/packages/uganda.html" class="text-light text-decoration-none"><i class="fas fa-leaf me-2"></i>Uganda Safaris</a></li>
            <li class="mb-2"><a href="/packages/kenya.html" class="text-light text-decoration-none"><i class="fas fa-paw me-2"></i>Kenya Safaris</a></li>
            <li class="mb-2"><a href="/packages/tanzania.html" class="text-light text-decoration-none"><i class="fas fa-mountain me-2"></i>Tanzania Safaris</a></li>
            <li class="mb-2"><a href="/packages/rwanda.html" class="text-light text-decoration-none"><i class="fas fa-users me-2"></i>Rwanda Safaris</a></li>
          </ul>
        </div>
        <div class="col-lg-3">
          <h6 class="mb-3">Connect With Us</h6>
          <div class="social-icons mb-3">
            <a href="https://www.facebook.com/GisuSafaris" class="text-light me-3" target="_blank"><i class="fab fa-facebook fa-lg"></i></a>
            <a href="https://www.instagram.com/gisu_safaris" class="text-light me-3" target="_blank"><i class="fab fa-instagram fa-lg"></i></a>
            <a href="https://x.com/GisuSafaris" class="text-light me-3" target="_blank"><i class="fab fa-x fa-lg"></i></a>
            <a href="https://www.youtube.com/c/GisuSafaris" class="text-light me-3" target="_blank"><i class="fab fa-youtube fa-lg"></i></a>
            <a href="https://wa.me/61478914106" class="text-light" target="_blank"><i class="fab fa-whatsapp fa-lg"></i></a>
          </div>
          <div class="newsletter">
            <h6>Newsletter</h6>
            <form class="newsletter-form" id="footerNewsletterForm">
              <div class="input-group mb-2">
                <input type="email" class="form-control" name="email" placeholder="Your email" required>
                <button class="btn btn-primary" type="submit"><i class="fas fa-paper-plane"></i></button>
              </div>
              <small class="text-muted">Get safari tips & exclusive offers</small>
            </form>
          </div>
        </div>
      </div>
      <hr class="my-4">
      <div class="row align-items-center">
        <div class="row align-items-center">
          <div class="col-md-8"><p class="mb-0">&copy; 2025 Gisu Safaris. All rights reserved.</p></div>
          <div class="col-md-4 text-md-end"><p class="mb-0">Designed by <strong>Kairos Technologies</strong></p></div>
        </div>
        <div class="col-md-7 text-md-end">
          <a href="/privacy.html" class="text-white-50 text-decoration-none me-3">Privacy Policy</a>
          <a href="/terms.html" class="text-white-50 text-decoration-none">Terms of Service</a>
        </div>
      </div>
    </div>
  </footer>
</body>
</html>


