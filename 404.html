<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Redirecting…</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; padding: 2rem; color: #333; }
    .wrap { max-width: 640px; margin: auto; }
    .muted { color: #666; font-size: .95rem; }
    code { background: #f6f8fa; padding: 0 .25rem; border-radius: 4px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Redirecting…</h1>
    <p class="muted">Trying to locate the page. If you aren’t redirected automatically, you can go back to <a id="homeLink" href="#">home</a>.</p>
    <p class="muted"><small>This helper enables pretty URLs (no <code>.html</code>) on GitHub Pages.</small></p>
  </div>
  <script>
    (function() {
      try {
        var loc = window.location;
        var path = loc.pathname || '/';
        // Determine project base (supports user and project pages)
        var parts = path.split('/').filter(Boolean); // e.g., ['gisu-safaris','packages','uganda']
        var projectBase = '/';
        if (parts.length > 0) {
          // Assume first segment is repo name for project pages
          projectBase = '/' + parts[0] + '/';
        }
        document.getElementById('homeLink').setAttribute('href', projectBase);
        var hasTrailing = /\/$/.test(path);
        var base = path.replace(/\/$/, '');
        if (!base) base = '';

        // Build candidate targets relative to current path
        var candidates = [];
        if (base) candidates.push(base + '.html');
        if (!hasTrailing) candidates.push(base + '/index.html');
        else candidates.push(path + 'index.html');

        // For GitHub Pages project sites, keep query/hash
        var suffix = (loc.search || '') + (loc.hash || '');

        function tryNext(i) {
          if (i >= candidates.length) {
            // Give up, go to root
            window.location.replace(projectBase);
            return;
          }
          var target = candidates[i] + suffix;
          // HEAD to see if it exists
          fetch(target, { method: 'HEAD', cache: 'no-cache' }).then(function(res) {
            if (res.ok) {
              window.location.replace(target);
            } else {
              tryNext(i + 1);
            }
          }).catch(function() { tryNext(i + 1); });
        }

        tryNext(0);
      } catch (e) {
        // As a last resort
        var p = (window.location.pathname || '/');
        var segs = p.split('/').filter(Boolean);
        var base = segs.length ? '/' + segs[0] + '/' : '/';
        window.location.replace(base);
      }
    })();
  </script>
</body>
</html>
